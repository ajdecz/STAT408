bptest(mod_max_sqrt)
plot(mod_max_sqrt)
#testing out some models- chose sqrt transformation
mod_max_sqrt <- glm(num_awards ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod_max_sqrt)
plot(mod_max_sqrt)
#testing out some models- chose sqrt transformation
mod_max <- glm(num_awards ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod_max_sqrt)
plot(mod_max_sqrt)
#testing out some models- chose sqrt transformation
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod_max_sqrt)
plot(mod_max_sqrt)
#testing out some models- chose sqrt transformation
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod_max_sqrt)
plot(mod_max_sqrt)
#testing out some models- chose sqrt transformation
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod <- glm(log(num_awards+1) ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod <- glm(num_awards ~ prog + math, family = quasipoisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
#homoscedasticity still violated
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ .*., family = poisson, data = award)
#homoscedasticity still violated, using weighted least squares
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ .*. + I(math^2), family = poisson, data = award)
#homoscedasticity still violated, using weighted least squares
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ prog + math + I(math^2), family = poisson, data = award)
#homoscedasticity still violated, using weighted least squares
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ prog + math + I(math^2), family = poisson, data = award)
#homoscedasticity still violated, using weighted least squares
wts <- fitted(mod_all^2)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ prog + math + I(math^2), family = poisson, data = award)
#homoscedasticity still violated, using weighted least squares
wts <- fitted(mod_all)^2
mod_wts <- glm(num_awards ~ .*. + I(math^2), family = poisson, data = award, weights = wts)
library(lmtest)
bptest(mod)
plot(mod)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ prog + math + I(math^2), family = poisson, data = award)
#homoscedasticity still violated, using weighted least squares
wts <- fitted(mod_all)^2
mod_wts <- glm(num_awards ~ .*. + I(math^2), family = poisson, data = award, weights = wts)
library(lmtest)
bptest(mod_wts)
plot(mod_wts)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ prog + math + I(math^2), family = poisson, data = award)
#homoscedasticity still violated, using weighted least squares
wts <- 1 / fitted(mod_all)^2
mod_wts <- glm(num_awards ~ .*. + I(math^2), family = poisson, data = award, weights = wts)
library(lmtest)
bptest(mod_wts)
plot(mod_wts)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ .*., family = poisson, data = award)
#testing out some models- chose sqrt transformation
mod_all <- glm(num_awards ~ .*., family = poisson, data = award)
plot(mod_all)
#interaction + normal terms + quadratic term
mod_all <- glm(num_awards ~ prog + math, data = award)
#interaction + normal terms + quadratic term
mod <- lm(num_awards ~ prog + math, data = award)
mod <- lm(num_awards ~ prog + math, data = award)
library(tidyverse)
award <- read.csv('Data/awards.csv')
library(tidyverse)
award <- read.csv('Data/awards.csv')d
library(tidyverse)
award <- read.csv('Data/awards.csv')
mod <- lm(num_awards ~ prog + math, data = award)
mod <- lm(num_awards ~ prog + math, data = award)
summary(mod)
mod <- glm(num_awards ~ prog + math,family = poisson  data = award)
mod <- glm(num_awards ~ prog + math,family = poisson, data = award)
summary(mod)
mod <- lm(num_awards ~ prog + math,family = poisson, data = award)
summary(mod)
mod <- glm(num_awards ~ prog + math,family = poisson, data = award)
summary(mod)
mod <- lm(num_awards ~ prog + math,family = poisson, data = award)
summary(mod)
mod <- lm(num_awards ~ prog + math, data = award)
summary(mod)
mod <- glm(num_awards ~ prog + math, data = award)
summary(mod)
mod <- lm(num_awards ~ prog + math, data = award)
summary(mod)
View(award)
mod <- glm(num_awards ~ prog + math,family = poisson data = award)
mod <- glm(num_awards ~ prog + math,family = poisson, data = award)
summary(mod)
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
summary(mod)
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
summary(mod)
exp(0.07015)
confint(mod, 'progVocational')
confint(mod, 'progVocational')
library(pccc)
pc <- pccc_icd10_dataset
head(pc)
#making a csv to get into python
write.csv(pc, "icd10_pccc_dataset.csv")
#get column names
cols <- colnames(pc)
#extract any containing g + number
cols_to_rm <- cols[str_detect(cols, '^g\\d+')]
#get column names
cols <- colnames(pc)
#extract any containing g + number
cols_to_rm <- cols[str_detect(cols, '^g\\d+')]
library(tidyverse)
dat <- data.frame(grp = c("A","A","B","B"),
sex = c("F","M","F","M"),
meanL = c(0.225,0.47,0.325,0.547),
sdL = c(0.106,.325,.106,.308),
meanR = c(.34,.57,.4,.647),
sdR = c(0.0849, 0.325, 0.0707, 0.274)
)
dat
#get column names
cols <- colnames(pc)
#extract any containing g + number
cols_to_rm <- cols[str_detect(cols, '^g\\d+')]
cols_to_rm
#new set only containing columns without g+num
pc_removed_g <- pc %>%
select(-all_of(cols_to_rm))
head(pc_removed_g)
library(babynames)
baby <- babynames %>%
mutate(
combo = str_c(name, "_",sex)
)
head(baby$combo)
baby <- baby %>%
separate(combo, into = c('name','sex'))
head(baby)
library(tidyverse)
award <- read.csv('Data/awards.csv')
# using poisson bc awards is a count variable
mod <- glm(num_awards ~ prog + math, family = poisson, data = award)
summary(mod)
confint(mod, 'progVocational')
summary(mod)
chi2 <- mod$null.deviance - mod$deviance
df   <- mod$df.null - mod$df.residual
pchisq(chi2, df, lower.tail = FALSE)
chi2
mod_int <- glm(num_awards ~ prog + math + prog:math, data = award, family = poisson)
anova(mod_int, mod)
plot(fitted(mod), residuals.glm(mod), type = 'pearson')
library(Lahman)
peeps <- People
head(peeps)
write_csv(Lahman, 'Lahman.csv')
library(Lahman)
peeps <- People
head(peeps)
write_csv(peeps, 'people.csv')
mod_int <- glm(num_awards ~ prog + math + prog:math, data = award, family = poisson)
anova(mod, mod_int)
library(tidyverse)
dat <- data.frame(grp = c("A","A","B","B"),
sex = c("F","M","F","M"),
meanL = c(0.225,0.47,0.325,0.547),
sdL = c(0.106,.325,.106,.308),
meanR = c(.34,.57,.4,.647),
sdR = c(0.0849, 0.325, 0.0707, 0.274)
)
dat
wide_dat <- dat %>%
pivot_wider(
names_from = sex,
values_from = c('meanL', 'sdL', 'meanR', 'sdR')
)
#dunno if this was needed, just trying to give the exact output you gave
colnames(wide_dat) = c(
'grp',
'F.meanL',
'M.meanL',
'F.sdL',
'M.sdL',
'F.meanR',
'M.meanR',
'F.sdR',
'M.sdR'
)
wide_dat
library(pccc)
pc <- pccc_icd10_dataset
head(pc)
#making a csv to get into python
write.csv(pc, "icd10_pccc_dataset.csv")
#get column names
cols <- colnames(pc)
#extract any containing g + number
cols_to_rm <- cols[str_detect(cols, '^g\\d+')]
cols_to_rm
#new set only containing columns without g+num
pc_removed_g <- pc %>%
select(-all_of(cols_to_rm))
head(pc_removed_g)
pc_long <- pc_removed_g %>%
pivot_longer(
cols = -id,
names_to =  'type',
values_to = 'code',
)
pc_long
library(Lahman)
peeps <- People
head(peeps)
write_csv(peeps, 'people.csv')
peeps <- peeps %>%
mutate(
birthDate = ymd(birthDate),
deathDate = ymd(deathDate),
deathDate = if_else(is.na(deathDate), ymd('2025-11-07'), deathDate)
)
peeps <- peeps %>%
mutate(years_lived = as.numeric(difftime(deathDate, birthDate))/365)
median_life <- median(peeps$years_lived, na.rm = TRUE)
median_life
country_life <- peeps %>%
group_by(birthCountry) %>%
summarise(
median_years = median(years_lived, na.rm = TRUE),
n_players = n()
) %>%
arrange(median_years)
country_life
new2_peeps <- peeps %>%
mutate(
debut_age = as.numeric(difftime(debut, birthDate, units = 'days'))/365,
finalgame_age = as.numeric(difftime(finalGame, birthDate, units = 'days'))/365
)
median_debut_age <- median(new2_peeps$debut_age, na.rm = TRUE)
median_finalgame_age <- median(new2_peeps$finalgame_age, na.rm = TRUE)
median_debut_age
median_finalgame_age
#need to pivot first
new2_peeps_long <- new2_peeps %>%
select(debut_age,finalgame_age) %>%
pivot_longer(
cols = c(debut_age, finalgame_age),
names_to = 'type',
values_to = 'age'
)
new2_peeps_long %>%
mutate(type = recode(type,
'debut_age' = 'Debut Age',
'finalgame_age' = 'Final Age')) %>%
ggplot(aes(x = type, y = age, fill = type))+
geom_boxplot()+
scale_fill_manual(values = c('skyblue3','steelblue'))+
labs(
title = 'Distribution of Player Ages at MLB debut and Final Game',
x = '',
y = 'Age'
)+
theme_classic()+
theme(
axis.text = element_text(size = 10),
legend.position = 'none'
)
#need to pivot first
new2_peeps_long <- new2_peeps %>%
select(debut_age,finalgame_age) %>%
pivot_longer(
cols = c(debut_age, finalgame_age),
names_to = 'type',
values_to = 'age'
)
new2_peeps_long %>%
mutate(type = recode(type,
'debut_age' = 'Debut Age',
'finalgame_age' = 'Final Age')) %>%
ggplot(aes(x = type, y = age, fill = type))+
geom_boxplot()+
scale_fill_manual(values = c('skyblue3','steelblue'))+
labs(
title = 'Distribution of Debut Age vs Final Game Age',
x = '',
y = 'Age'
)+
theme_classic()+
theme(
axis.text = element_text(size = 10),
legend.position = 'none'
)
new2_peeps <- new2_peeps %>%
mutate(
years_played = finalgame_age - debut_age
)
summary(new2_peeps$years_played)
library(babynames)
baby <- babynames %>%
mutate(
combo = str_c(name, "_",sex)
)
head(baby$combo)
baby <- baby %>%
separate(combo, into = c('name','sex'))
head(baby)
write_csv(baby, 'baby.csv')
baby_m_e_top_names <- babynames %>%
filter(str_detect(name, "^M")) %>%
mutate(e_count = str_count(name, "e")) %>%
group_by(sex) %>%
arrange(desc(e_count)) %>%
slice_head(n = 1)
baby_m_e_top_names
baby_top <- babynames %>%
filter(name %in% baby_m_e_top_names$name) %>%
group_by(year,name,sex) %>%
summarise(births = sum(n))
baby_top
ggplot(baby_top, aes(x = year, y = births, color = name))+
geom_line()+
labs(
title = "Birth Trends for M Names with the Most E's (by Gender)",
x = "Year",
y = "Number of Births"
) +
scale_x_continuous(
breaks = seq(1920,2020, by = 10),
labels = seq(1920,2020, by = 10)
) +
scale_color_manual(
name = "Name",
values = c('lightblue','pink')
) # pretty clear the gender by the color
baby_21c_prop_startvowel <- babynames %>%
filter(year >= 2000) %>%
summarise(
proportion = sum(n[str_detect(name, '^[AEIOU]')])/ sum(n)
)
baby_21c_prop_startvowel * 100
baby_m_e_top_names <- babynames %>%
filter(str_detect(name, "^M")) %>%
mutate(e_count = str_count(name, "e")) %>%
group_by(sex) %>%
arrange(desc(e_count)) %>%
slice_head(n = 1)
baby_m_e_top_names
baby_top <- babynames %>%
filter(name %in% baby_m_e_top_names$name) %>%
group_by(year,name,sex) %>%
summarise(births = sum(n))
baby_top
ggplot(baby_top, aes(x = year, y = births, color = name))+
geom_line()+
labs(
title = "Birth Trends for M Names with the Most E's (by Gender)",
x = "Year",
y = "Number of Births"
) +
scale_x_continuous(
breaks = seq(1920,2020, by = 10),
labels = seq(1920,2020, by = 10)
) +
scale_color_manual(
name = "Name",
values = c('lightblue','pink')
) +  # pretty clear the gender by the color
scale_linetype_manual(values = c('M' = 'dotted', 'F' = 'solid'))
baby_m_e_top_names <- babynames %>%
filter(str_detect(name, "^M")) %>%
mutate(e_count = str_count(name, "e")) %>%
group_by(sex) %>%
arrange(desc(e_count)) %>%
slice_head(n = 1)
baby_m_e_top_names
baby_top <- babynames %>%
filter(name %in% baby_m_e_top_names$name) %>%
group_by(year,name,sex) %>%
summarise(births = sum(n))
baby_top
ggplot(baby_top, aes(x = year, y = births, fill = name))+
geom_line()+
labs(
title = "Birth Trends for M Names with the Most E's (by Gender)",
x = "Year",
y = "Number of Births"
) +
scale_x_continuous(
breaks = seq(1920,2020, by = 10),
labels = seq(1920,2020, by = 10)
) +  # pretty clear the gender by the color
scale_linetype_manual(values = c('M' = 'dotted', 'F' = 'solid'))
baby_m_e_top_names <- babynames %>%
filter(str_detect(name, "^M")) %>%
mutate(e_count = str_count(name, "e")) %>%
group_by(sex) %>%
arrange(desc(e_count)) %>%
slice_head(n = 1)
baby_m_e_top_names
baby_top <- babynames %>%
filter(name %in% baby_m_e_top_names$name) %>%
group_by(year,name,sex) %>%
summarise(births = sum(n))
baby_top
ggplot(baby_top, aes(x = year, y = births, fill = name, linetype = sex))+
geom_line()+
labs(
title = "Birth Trends for M Names with the Most E's (by Gender)",
x = "Year",
y = "Number of Births"
) +
scale_x_continuous(
breaks = seq(1920,2020, by = 10),
labels = seq(1920,2020, by = 10)
) +  # pretty clear the gender by the color
scale_linetype_manual(values = c('M' = 'dotted', 'F' = 'solid'))
baby_m_e_top_names <- babynames %>%
filter(str_detect(name, "^M")) %>%
mutate(e_count = str_count(name, "e")) %>%
group_by(sex) %>%
arrange(desc(e_count)) %>%
slice_head(n = 1)
baby_m_e_top_names
baby_top <- babynames %>%
filter(name %in% baby_m_e_top_names$name) %>%
group_by(year,name,sex) %>%
summarise(births = sum(n))
baby_top
ggplot(baby_top, aes(x = year, y = births, colour = name, linetype = sex))+
geom_line()+
labs(
title = "Birth Trends for M Names with the Most E's (by Gender)",
x = "Year",
y = "Number of Births"
) +
scale_x_continuous(
breaks = seq(1920,2020, by = 10),
labels = seq(1920,2020, by = 10)
) +  # pretty clear the gender by the color
scale_linetype_manual(values = c('M' = 'dotted', 'F' = 'solid'))
baby_m_e_top_names <- babynames %>%
filter(str_detect(name, "^M")) %>%
mutate(e_count = str_count(name, "e")) %>%
group_by(sex) %>%
arrange(desc(e_count)) %>%
slice_head(n = 1)
baby_m_e_top_names
baby_top <- babynames %>%
filter(name %in% baby_m_e_top_names$name) %>%
group_by(year,name,sex) %>%
summarise(births = sum(n))
baby_top
ggplot(baby_top, aes(x = year, y = births, color = name, linetype = sex))+
geom_line()+
labs(
title = "Birth Trends for M Names with the Most E's (by Gender)",
x = "Year",
y = "Number of Births"
) +
scale_x_continuous(
breaks = seq(1920,2020, by = 10),
labels = seq(1920,2020, by = 10)
) +  # pretty clear the gender by the color
scale_linetype_manual(values = c('M' = 'dotted', 'F' = 'solid'))
